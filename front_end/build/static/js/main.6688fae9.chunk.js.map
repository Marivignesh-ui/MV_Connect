{"version":3,"sources":["SocketContext.js","Components/VideoPlayer.jsx","Components/OptionsComponent.jsx","Components/Notifications.jsx","App.js","index.js"],"names":["SocketContext","createContext","socket","io","ContextProvider","children","useState","stream","setStream","me","setMe","call","setCall","callAccepted","setCallAccepted","callEnded","setCallEnded","name","setName","myVideo","useRef","userVideo","connectionRef","useEffect","navigator","mediaDevices","getUserMedia","video","audio","then","currentStream","current","srcObject","on","id","from","callerName","signal","isReceivedCall","Provider","value","callUser","peer","Peer","initiator","trickle","data","emit","userToCall","signalData","leaveCall","destroy","window","location","reload","answerCall","to","VideoPlayer","useContext","Grid","container","className","Paper","item","xs","md","Typography","variant","gutterBottom","playsInline","muted","ref","autoPlay","Options","idToCall","setIdToCall","elevation","noValidate","autoComplete","style","padding","TextField","label","onChange","e","target","fullWidth","text","marginTop","Button","color","startIcon","Assignment","fontSize","PhoneDisabled","onClick","Phone","Notifications","display","justifyContent","App","src","alt","align","class","href","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.6688fae9.chunk.js","sourcesContent":["import React,{createContext,useState,useRef,useEffect} from 'react';\r\nimport {io} from 'socket.io-client';\r\nimport Peer from 'simple-peer';\r\n\r\nconst SocketContext = createContext();\r\n\r\nconst socket=io('https://mvvideo-chat-app.herokuapp.com/');\r\n\r\nconst ContextProvider=({children})=>{\r\n\r\n    const [stream,setStream] = useState(null);\r\n    const [me,setMe] = useState('');\r\n    const [call,setCall] = useState({});\r\n    const [callAccepted,setCallAccepted] = useState(false);\r\n    const [callEnded,setCallEnded] = useState(false);\r\n    const [name,setName] = useState('');\r\n    \r\n    const myVideo = useRef();\r\n    const userVideo = useRef();\r\n    const connectionRef = useRef();\r\n\r\n    useEffect(()=>{\r\n        navigator.mediaDevices.getUserMedia({video:true,audio:true})\r\n            .then((currentStream)=>{\r\n                setStream(currentStream);\r\n\r\n                myVideo.current.srcObject = currentStream;\r\n            });\r\n\r\n        socket.on('me',(id)=>setMe(id));    \r\n\r\n        socket.on('calluser',({from,name:callerName,signal})=>{\r\n            setCall({isReceivedCall:true,from,name:callerName,signal})\r\n        });\r\n    },[]);\r\n\r\n    const answerCall = ()=>{\r\n        setCallAccepted(true);\r\n\r\n        const peer = new Peer({initiator:false,trickle:false,stream});\r\n\r\n        peer.on('signal',(data)=>{\r\n            socket.emit('answercall',{signal:data,to:call.from});\r\n        });\r\n\r\n        peer.on('stream',(currentStream)=>{\r\n            userVideo.current.srcObject = currentStream;\r\n        });\r\n\r\n        peer.signal(call.signal);\r\n\r\n        connectionRef.current=peer;\r\n    }\r\n\r\n    const callUser = (id)=>{\r\n\r\n        const peer=new Peer({initiator:true,trickle:false,stream});\r\n\r\n        peer.on('signal',(data)=>{\r\n            socket.emit('calluser',{userToCall:id,signalData:data,from:me,name});\r\n        });\r\n\r\n        peer.on('stream',(currentStream)=>{\r\n            userVideo.current.srcObject = currentStream;\r\n        });\r\n\r\n        socket.on('callaccepted',(signal)=>{\r\n            setCallAccepted(true);\r\n\r\n            peer.signal(signal);\r\n        })\r\n\r\n        connectionRef.current = peer;\r\n    }\r\n\r\n    const leaveCall = ()=>{\r\n        setCallEnded(true);\r\n\r\n        connectionRef.current.destroy();\r\n\r\n        window.location.reload();\r\n    }\r\n\r\n    return (\r\n        <SocketContext.Provider value={{call,callAccepted,myVideo,userVideo,stream,name,setName,callEnded,me,callUser,leaveCall,answerCall}}>\r\n            {children}\r\n        </SocketContext.Provider>\r\n    );\r\n}\r\n\r\nexport {ContextProvider,SocketContext};","import React,{useContext} from 'react';\r\nimport {Grid,Typography,Paper} from '@material-ui/core';\r\n\r\nimport { SocketContext } from '../SocketContext';\r\n\r\nconst VideoPlayer = () => {\r\n    const {name,callAccepted,myVideo,userVideo,callEnded,stream,call}=useContext(SocketContext);\r\n    return (\r\n        <Grid container className=\"gridcontainer\">\r\n            {\r\n                stream && (\r\n                    <Paper className=\"paper\">\r\n                        <Grid item xs={12} md={6}>\r\n                            <Typography variant=\"h5\" gutterBottom>{name || 'Name'}</Typography>\r\n                            <video playsInline muted ref={myVideo} autoPlay className=\"video\" />\r\n                        </Grid>\r\n                    </Paper>\r\n            )}\r\n            { \r\n                callAccepted && !callEnded && (\r\n                    <Paper className=\"paper\">\r\n                        <Grid item xs={12} md={6}>\r\n                            <Typography variant=\"h5\" gutterBottom>{call.name || 'Name'}</Typography>\r\n                            <video playsInline ref={userVideo} autoPlay className=\"video\" />\r\n                        </Grid>\r\n                    </Paper>\r\n            )}\r\n        </Grid>\r\n    )\r\n}\r\n\r\nexport default VideoPlayer\r\n","import React,{useContext,useState} from 'react';\r\nimport { Button,TextField,Grid,Typography,Paper } from '@material-ui/core';\r\nimport CopytoClipboard from 'react-copy-to-clipboard';\r\nimport {Assignment,Phone,PhoneDisabled} from '@material-ui/icons';\r\n\r\nimport { SocketContext } from '../SocketContext';\r\n\r\nconst Options = ({children}) => {\r\n    const {me,callAccepted,name,setName,callEnded,leaveCall,callUser}=useContext(SocketContext);\r\n    const [idToCall,setIdToCall] = useState('');\r\n    \r\n    return (\r\n        <div className=\"container\">\r\n            <Paper elevation={10} className=\"paper1\">\r\n                <form className=\"root\" noValidate autoComplete=\"off\">\r\n                    <Grid container className=\"gridContainer\">\r\n                        <Grid item xs={12} md={6} style={{padding:'20px'}}>\r\n                            <Typography gutterBottom variant=\"h6\">Account Info</Typography>\r\n                            <TextField label=\"Name\" value={name} onChange={(e)=>setName(e.target.value)} fullWidth />\r\n                            <CopytoClipboard text={me} style={{marginTop:\"20px\"}}>\r\n                                <Button variant=\"contained\" color=\"primary\" fullWidth startIcon={<Assignment fontSize=\"large\" />}>\r\n                                    Copy Your ID\r\n                                </Button>\r\n                            </CopytoClipboard>\r\n                        </Grid>\r\n                        <Grid item xs={12} md={6} style={{padding:'20px'}}>\r\n                            <Typography gutterBottom variant=\"h6\">Make a call</Typography>\r\n                            <TextField label=\"ID to call\" value={idToCall} onChange={(e)=>setIdToCall(e.target.value)} fullWidth />\r\n                            {callAccepted && !callEnded ?(\r\n                                <Button variant=\"contained\" color=\"secondary\" startIcon={<PhoneDisabled fontSize=\"large\" />} fullWidth onClick={leaveCall} style={{marginTop:\"20px\"}}>\r\n                                    Hang Up\r\n                                </Button>\r\n                            ):(\r\n                                <Button variant=\"contained\" color=\"primary\" startIcon={<Phone fontSize=\"large\" />} fullWidth onClick={()=>callUser(idToCall)} style={{marginTop:\"20px\"}}>\r\n                                    Call\r\n                                </Button>\r\n                            )}\r\n                        </Grid>\r\n                    </Grid>\r\n                </form>\r\n                {children}\r\n            </Paper>\r\n            \r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Options;","import React,{useContext} from 'react';\r\nimport {Button} from '@material-ui/core';\r\n\r\nimport { SocketContext } from '../SocketContext';\r\n\r\nconst Notifications = () => {\r\n    const {answerCall,call,callAccepted}=useContext(SocketContext);\r\n    return (\r\n        <>\r\n          {\r\n              call.isReceivedCall && !callAccepted  && (\r\n                  <div style={{display:'flex',justifyContent:'center'}}>\r\n                      <h1>{call.name} is calling: </h1>\r\n                      <Button variant=\"contained\" color=\"primary\" onClick={answerCall}>\r\n                          Answer\r\n                      </Button>\r\n                  </div>\r\n          )}  \r\n        </>\r\n    )\r\n}\r\n\r\nexport default Notifications\r\n","import React from 'react';\r\nimport {Typography} from '@material-ui/core';\r\n\r\nimport VideoPlayer from './Components/VideoPlayer.jsx';\r\nimport Options from './Components/OptionsComponent.jsx';\r\nimport Notifications from './Components/Notifications.jsx';\r\n\r\nconst App = () => {\r\n    return (\r\n        <>\r\n        <div className=\"wrapper\">\r\n            <div className=\"appbar\">\r\n                <img src=\"/images/logo192.png\" alt=\"logo\" className=\"logo\"/><h1 align=\"center\" className=\"apptitle\">MV Connect</h1>\r\n            </div>\r\n            <VideoPlayer />\r\n            <Options>\r\n                <Notifications />\r\n            </Options>\r\n        </div>\r\n        <footer>\r\n            <div>\r\n                <div>\r\n                    <a class=\"btn\" href=\"http://google.com/+\"><i class=\"fa fa-google-plus\"></i></a>\r\n                    <a class=\"btn\" href=\"https://www.facebook.com/marivignesh01/\"><i class=\"fa fa-facebook\"></i></a>\r\n                    <a class=\"btn\" href=\"https://www.linkedin.com/in/marivignesh/\"><i class=\"fa fa-linkedin\"></i></a>\r\n                    <a class=\"btn\" href=\"https://twitter.com/marivigneshr499\"><i class=\"fa fa-twitter\"></i></a>\r\n                    <a class=\"btn\" href=\"https://www.instagram.com/marivignesh499/\"><i class=\"fa fa-instagram\"></i></a>\r\n                    <a class=\"btn\" href=\"mailto:smartvignesh499@gmail.com\"><i class=\"fa fa-envelope-o\"></i></a>\r\n                </div>\r\n                <div>\r\n                    <p>© Copyright 2021 MV Connect</p>\r\n                </div>\r\n            </div>\r\n        </footer>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default App\r\n","import React from 'react';\r\nimport  ReactDOM  from 'react-dom';\r\n\r\nimport App from './App';\r\nimport { ContextProvider } from './SocketContext';\r\nimport './styles.css';\r\nimport 'font-awesome/css/font-awesome.css';\r\n\r\nReactDOM.render(<ContextProvider><App /></ContextProvider>,document.getElementById('root'));"],"sourceRoot":""}